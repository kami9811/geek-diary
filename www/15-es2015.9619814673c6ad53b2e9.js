(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{tmrb:function(t,i,e){"use strict";e.r(i),e.d(i,"Tab1PageModule",(function(){return p}));var o=e("TEn/"),r=e("ofXK"),s=e("3Pt+"),l=e("qtYk"),a=e("tyNb"),n=e("mrSG"),c=e("fXoL"),b=e("Bfh1"),h=e("dVwY");function u(t,i){if(1&t&&(c.Kb(0),c.Mb(1,"ion-card",9),c.Mb(2,"ion-card-header",10),c.Mb(3,"ion-card-subtitle"),c.hc(4),c.Ib(5,"br"),c.hc(6),c.Lb(),c.Mb(7,"ion-card-title"),c.hc(8),c.Lb(),c.Lb(),c.Lb(),c.Jb()),2&t){const t=i.$implicit;c.xb(1),c.Zb("color","",t.category_color,"-",t.category_level,""),c.xb(1),c.ac("routerLink","/article/1/",t.article_id,"/",t.title,"/",t.text,"/",t.id,""),c.xb(2),c.kc("[",t.distance.toFixed(1),"km] ",t.id,"\u3055\u3093\u306e\u6295\u7a3f"),c.xb(2),c.ic(t.date),c.xb(2),c.ic(t.title)}}const d=[{path:"",component:(()=>{class t{constructor(t,i,e,o){this.geolocation=t,this.alertController=i,this.router=e,this.gs=o,this.latitude=0,this.longitude=0,this.postObj={},this.returnObj={},this.articleObj={},this.articleList=[],this.onGps=()=>{this.geolocation.getCurrentPosition().then(t=>{this.latitude=t.coords.latitude,this.longitude=t.coords.longitude,this.alertGps()}).catch(t=>{console.log("Error getting location",t)})},this.navigateToSelf=()=>{this.router.navigate(["/self",1,"1"])},this.navigateToEdit=()=>{this.router.navigate(["/edit",1])},this.getList=()=>{this.geolocation.getCurrentPosition().then(t=>{this.latitude=t.coords.latitude,this.longitude=t.coords.longitude,this.postObj.hash=localStorage.hash,this.postObj.latitude=this.latitude,this.postObj.longitude=this.longitude,this.postObj.distance=Number(localStorage.distance),this.postObj.tab=1,this.postObj.attribute=localStorage.attribute;const i=this.postObj;console.log(i),this.gs.http("https://kn46itblog.com/hackathon/winter2020/php_apis/getDiaryArticle.php",i).subscribe(t=>{console.log(t),this.articleObj=t,this.articleList=[];for(let i=0;i<this.articleObj.article_num;i++)this.objWord="article"+(i+1),1==this.articleObj.article_list[this.objWord].category_level?this.articleObj.article_list[this.objWord].category_level="one":2==this.articleObj.article_list[this.objWord].category_level?this.articleObj.article_list[this.objWord].category_level="two":3==this.articleObj.article_list[this.objWord].category_level?this.articleObj.article_list[this.objWord].category_level="three":4==this.articleObj.article_list[this.objWord].category_level?this.articleObj.article_list[this.objWord].category_level="four":5==this.articleObj.article_list[this.objWord].category_level&&(this.articleObj.article_list[this.objWord].category_level="five"),this.articleList.push(this.articleObj.article_list[this.objWord]);console.log(this.articleList)},t=>console.error(t))}).catch(t=>{console.log("Error getting location",t)})}}ngOnInit(){console.log("Init!"),this.postObj.id=localStorage.id,this.postObj.password=localStorage.password,this.postObj.prefecture=localStorage.prefecture;const t=this.postObj;console.log(t),this.gs.http("https://kn46itblog.com/hackathon/winter2020/php_apis/login.php",t).subscribe(t=>{this.returnObj=t,200==this.returnObj.status?(localStorage.hash=this.returnObj.hash,this.getList()):this.router.navigate(["/login"])},t=>console.error(t)),this.interval=setInterval(()=>{this.getList()},1500)}alertGps(){return Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({header:"\u5ea7\u6a19\u304c\u89b3\u6e2c\u3055\u308c\u307e\u3057\u305f",message:"\u7def\u5ea6: "+this.latitude+"<br>\u7d4c\u5ea6: "+this.longitude,buttons:["OK"]});yield t.present()}))}}return t.\u0275fac=function(i){return new(i||t)(c.Hb(b.a),c.Hb(o.a),c.Hb(a.g),c.Hb(h.a))},t.\u0275cmp=c.Bb({type:t,selectors:[["app-tab1"]],decls:12,vars:3,consts:[[3,"translucent"],["id","icon","src","../../assets/icon/icon.png"],[3,"fullscreen"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","start","slot","fixed"],["color","base-green",3,"click"],["name","newspaper-outline"],["vertical","bottom","horizontal","end","slot","fixed"],["name","add-outline"],["button","true",3,"color"],[3,"routerLink"]],template:function(t,i){1&t&&(c.Mb(0,"ion-header",0),c.Mb(1,"ion-toolbar"),c.Mb(2,"ion-title"),c.Ib(3,"ion-img",1),c.Lb(),c.Lb(),c.Lb(),c.Mb(4,"ion-content",2),c.gc(5,u,9,10,"ng-container",3),c.Mb(6,"ion-fab",4),c.Mb(7,"ion-fab-button",5),c.Tb("click",(function(){return i.navigateToSelf()})),c.Ib(8,"ion-icon",6),c.Lb(),c.Lb(),c.Mb(9,"ion-fab",7),c.Mb(10,"ion-fab-button",5),c.Tb("click",(function(){return i.navigateToEdit()})),c.Ib(11,"ion-icon",8),c.Lb(),c.Lb(),c.Lb()),2&t&&(c.Yb("translucent",!0),c.xb(4),c.Yb("fullscreen",!0),c.xb(1),c.Yb("ngForOf",i.articleList))},directives:[o.q,o.F,o.E,o.s,o.m,r.h,o.n,o.o,o.r,o.g,o.i,o.K,a.h,o.j,o.k],styles:[""]}),t})()}];let g=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(i){return new(i||t)},imports:[[a.i.forChild(d)],a.i]}),t})(),p=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(i){return new(i||t)},imports:[[o.G,r.b,s.a,l.a,g]]}),t})()}}]);