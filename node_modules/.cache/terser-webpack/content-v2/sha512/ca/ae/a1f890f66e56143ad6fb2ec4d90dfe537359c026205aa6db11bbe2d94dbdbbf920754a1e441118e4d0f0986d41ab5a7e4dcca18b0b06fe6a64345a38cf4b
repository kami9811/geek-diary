{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{zFnc:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"EditPageModule\",(function(){return edit_module_EditPageModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),ionic_angular=__webpack_require__(\"TEn/\"),router=__webpack_require__(\"tyNb\"),tslib_es6=__webpack_require__(\"mrSG\"),core=__webpack_require__(\"fXoL\"),ngx=__webpack_require__(\"a/9d\"),global_service=__webpack_require__(\"dVwY\"),_ivy_ngcc_ngx=__webpack_require__(\"Bfh1\");function EditPage_div_7_div_5_Template(rf,ctx){if(1&rf&&(core.Kb(0,\"div\"),core.Ib(1,\"ion-img\",12),core.Jb()),2&rf){const ctx_r1=core.Ub(2);core.xb(1),core.Xb(\"src\",ctx_r1.image)}}function EditPage_div_7_Template(rf,ctx){if(1&rf){const _r3=core.Lb();core.Kb(0,\"div\"),core.Kb(1,\"div\",9),core.Kb(2,\"label\",10),core.gc(3,\"日誌の写真を選択\"),core.Jb(),core.Kb(4,\"input\",11),core.Sb(\"click\",(function($event){return core.cc(_r3),core.Ub().takePicture($event)})),core.Jb(),core.Jb(),core.fc(5,EditPage_div_7_div_5_Template,2,1,\"div\",2),core.Kb(6,\"ion-card\"),core.Kb(7,\"ion-card-content\"),core.gc(8,\"次のオススメの文[1]: RECOMMEND1\"),core.Jb(),core.Jb(),core.Kb(9,\"ion-card\"),core.Kb(10,\"ion-card-content\"),core.gc(11,\"次のオススメの文[2]: RECOMMEND2\"),core.Jb(),core.Jb(),core.Kb(12,\"ion-card\"),core.Kb(13,\"ion-card-content\"),core.gc(14,\"次のオススメの文[3]: RECOMMEND3\"),core.Jb(),core.Jb(),core.Jb()}if(2&rf){const ctx_r0=core.Ub();core.xb(5),core.Xb(\"ngIf\",ctx_r0.imageFlag)}}const routes=[{path:\"\",component:(()=>{class EditPage{constructor(camera,gs,geolocation,alertController,router,route){this.camera=camera,this.gs=gs,this.geolocation=geolocation,this.alertController=alertController,this.router=router,this.route=route,this.imageFlag=!1,this.title=\"\",this.text=\"\",this.article_id=0,this.postObj={},this.returnObj={},this.tabFlag=!1,this.takePicture=e=>{console.log(e);var file=e.srcElement.files[0];file&&fileReader.readAsDataURL(file);var fileReader=new FileReader;fileReader.addEventListener(\"load\",()=>{this.image=fileReader.result,this.imageFlag=!0},!1)},this.postArticle=()=>{this.geolocation.getCurrentPosition().then(resp=>{this.latitude=resp.coords.latitude,this.longitude=resp.coords.longitude,this.postObj.id=localStorage.id,this.postObj.article_id=this.article_id,this.postObj.prefecture=localStorage.prefecture,this.postObj.latitude=this.latitude,this.postObj.longitude=this.longitude,this.postObj.title=this.title,this.postObj.text=this.text,this.postObj.image=this.image,this.postObj.hash=localStorage.hash;const body=this.postObj;1==this.tab?this.gs.http(\"https://kn46itblog.com/hackathon/CCCu22/php_apis/registerDiaryArticle.php\",body).subscribe(res=>{console.log(res),this.navigate(),this.alertPost()},error=>console.error(error)):2==this.tab&&this.gs.http(\"https://kn46itblog.com/hackathon/CCCu22/php_apis/registerTipsArticle.php\",body).subscribe(res=>{console.log(res),this.navigate(),this.alertPost()},error=>console.error(error))},error=>console.error(error))},this.navigate=()=>{this.router.navigate([\"/tabs\",\"tab\"+this.tab,\"edited\"])}}ngOnInit(){this.route.params.subscribe(params=>{this.tab=params.tab,1==this.tab&&(this.tabFlag=!0)},error=>console.error(error))}alertPost(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const alert=yield this.alertController.create({message:\"日誌が投稿されました\",buttons:[\"OK\"]});yield alert.present()}))}}return EditPage.ɵfac=function(t){return new(t||EditPage)(core.Hb(ngx.a),core.Hb(global_service.a),core.Hb(_ivy_ngcc_ngx.a),core.Hb(ionic_angular.a),core.Hb(router.g),core.Hb(router.a))},EditPage.ɵcmp=core.Bb({type:EditPage,selectors:[[\"app-edit\"]],decls:19,vars:3,consts:[[\"slot\",\"start\"],[\"id\",\"back\"],[4,\"ngIf\"],[3,\"submit\"],[\"position\",\"floating\"],[\"required\",\"\",\"type\",\"text\",\"name\",\"title\",3,\"ngModel\",\"ngModelChange\"],[\"name\",\"text\",3,\"ngModel\",\"ngModelChange\"],[1,\"button-area\"],[\"type\",\"submit\",\"id\",\"post-article-button\"],[1,\"button-area\",\"ion-padding\"],[\"for\",\"file-button\",\"id\",\"file-button-label\"],[\"type\",\"file\",\"accept\",\"image/*\",\"id\",\"file-button\",3,\"click\"],[\"id\",\"image\",3,\"src\"]],template:function(rf,ctx){1&rf&&(core.Kb(0,\"ion-header\"),core.Kb(1,\"ion-toolbar\"),core.Kb(2,\"ion-buttons\",0),core.Ib(3,\"ion-back-button\",1),core.Jb(),core.Kb(4,\"ion-title\"),core.gc(5,\"編集ページ\"),core.Jb(),core.Jb(),core.Jb(),core.Kb(6,\"ion-content\"),core.fc(7,EditPage_div_7_Template,15,1,\"div\",2),core.Kb(8,\"form\",3),core.Sb(\"submit\",(function(){return ctx.postArticle()})),core.Kb(9,\"ion-item\"),core.Kb(10,\"ion-label\",4),core.gc(11,\"タイトル\"),core.Jb(),core.Kb(12,\"ion-input\",5),core.Sb(\"ngModelChange\",(function($event){return ctx.title=$event})),core.Jb(),core.Kb(13,\"ion-label\",4),core.gc(14,\"本文\"),core.Jb(),core.Kb(15,\"ion-textarea\",6),core.Sb(\"ngModelChange\",(function($event){return ctx.text=$event})),core.Jb(),core.Jb(),core.Kb(16,\"div\",7),core.Kb(17,\"button\",8),core.gc(18,\"投稿する\"),core.Jb(),core.Jb(),core.Jb(),core.Jb()),2&rf&&(core.xb(7),core.Xb(\"ngIf\",ctx.tabFlag),core.xb(5),core.Xb(\"ngModel\",ctx.title),core.xb(3),core.Xb(\"ngModel\",ctx.text))},directives:[ionic_angular.n,ionic_angular.B,ionic_angular.e,ionic_angular.c,ionic_angular.d,ionic_angular.A,ionic_angular.k,common.i,fesm2015_forms.i,fesm2015_forms.e,fesm2015_forms.f,ionic_angular.r,ionic_angular.s,ionic_angular.q,ionic_angular.H,fesm2015_forms.h,fesm2015_forms.d,fesm2015_forms.g,ionic_angular.z,ionic_angular.f,ionic_angular.g,ionic_angular.p],styles:[\"#file-button-label[_ngcontent-%COMP%]{font-size:2em;color:#fff;background-color:#cbf266;border-radius:5px;padding:10px 30px;width:80%}#file-button[_ngcontent-%COMP%]{display:none}.button-area[_ngcontent-%COMP%]{text-align:center}#post-article-button[_ngcontent-%COMP%]{font-size:2em;color:#fff;background-color:#cbf266;border-radius:5px;padding:10px 30px;width:80%}\"]}),EditPage})()}];let edit_routing_module_EditPageRoutingModule=(()=>{class EditPageRoutingModule{}return EditPageRoutingModule.ɵmod=core.Fb({type:EditPageRoutingModule}),EditPageRoutingModule.ɵinj=core.Eb({factory:function(t){return new(t||EditPageRoutingModule)},imports:[[router.i.forChild(routes)],router.i]}),EditPageRoutingModule})(),edit_module_EditPageModule=(()=>{class EditPageModule{}return EditPageModule.ɵmod=core.Fb({type:EditPageModule}),EditPageModule.ɵinj=core.Eb({factory:function(t){return new(t||EditPageModule)},imports:[[common.b,fesm2015_forms.a,ionic_angular.C,edit_routing_module_EditPageRoutingModule]]}),EditPageModule})()}}]);","extractedComments":[]}