{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Bg75:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"FamilyPageModule\",(function(){return family_module_FamilyPageModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),ionic_angular=__webpack_require__(\"TEn/\"),router=__webpack_require__(\"tyNb\"),tslib_es6=__webpack_require__(\"mrSG\"),core=__webpack_require__(\"fXoL\"),ngx=__webpack_require__(\"M2ZX\"),global_service=__webpack_require__(\"dVwY\");function FamilyPage_div_9_div_1_Template(rf,ctx){if(1&rf){const _r5=core.Lb();core.Kb(0,\"div\"),core.Kb(1,\"ion-card\"),core.Kb(2,\"ion-card-content\"),core.gc(3),core.Jb(),core.Jb(),core.Kb(4,\"div\",5),core.Kb(5,\"button\",6),core.Sb(\"click\",(function($event){return core.cc(_r5),core.Ub(2).onOk($event)})),core.gc(6,\"許可する\"),core.Jb(),core.Kb(7,\"button\",7),core.Sb(\"click\",(function($event){return core.cc(_r5),core.Ub(2).onNo($event)})),core.gc(8,\"却下する\"),core.Jb(),core.Jb(),core.Jb()}if(2&rf){const a_r3=ctx.$implicit;core.xb(3),core.ic(\"\",a_r3,\"さん\"),core.xb(2),core.Xb(\"id\",\"okbar\"+a_r3),core.xb(2),core.Xb(\"id\",\"nobar\"+a_r3)}}function FamilyPage_div_9_Template(rf,ctx){if(1&rf&&(core.Kb(0,\"div\"),core.fc(1,FamilyPage_div_9_div_1_Template,9,3,\"div\",4),core.Jb()),2&rf){const ctx_r0=core.Ub();core.xb(1),core.Xb(\"ngForOf\",ctx_r0.applicantList)}}function FamilyPage_div_10_Template(rf,ctx){if(1&rf){const _r8=core.Lb();core.Kb(0,\"div\"),core.Kb(1,\"div\",5),core.Kb(2,\"form\",8),core.Sb(\"submit\",(function(){return core.cc(_r8),core.Ub().apply()})),core.Kb(3,\"ion-item\",9),core.Kb(4,\"ion-label\",10),core.gc(5,\"家族登録を申請するID\"),core.Jb(),core.Kb(6,\"ion-input\",11),core.Sb(\"ngModelChange\",(function($event){return core.cc(_r8),core.Ub().id=$event})),core.Jb(),core.Jb(),core.Kb(7,\"button\",12),core.gc(8,\"家族登録を申請\"),core.Jb(),core.Jb(),core.Jb(),core.Jb()}if(2&rf){const ctx_r1=core.Ub();core.xb(6),core.Xb(\"ngModel\",ctx_r1.id)}}const routes=[{path:\"\",component:(()=>{class FamilyPage{constructor(alertController,router,route,nativeStorage,gs){this.alertController=alertController,this.router=router,this.route=route,this.nativeStorage=nativeStorage,this.gs=gs,this.parentFlag=!1,this.postObj={},this.returnObj={},this.applicantList=[],this.onOk=e=>{console.log(e.target.id),this.postObj.applicant_id=e.target.id.split(\"bar\")[1],this.postObj.permission=1,this.gs.http(\"https://kn46itblog.com/hackathon/CCCu22/php_apis/processApplicant.php\",this.postObj).subscribe(res=>{console.log(res),this.load()},error=>console.error(error)),this.alertOk()},this.onNo=e=>{console.log(e.target.id),this.postObj.applicant_id=e.target.id.split(\"bar\")[1],this.postObj.permission=0,this.gs.http(\"https://kn46itblog.com/hackathon/CCCu22/php_apis/processApplicant.php\",this.postObj).subscribe(res=>{console.log(res),this.load()},error=>console.error(error)),this.alertNo()},this.apply=()=>{this.postObj.apply_id=this.id,this.gs.http(\"https://kn46itblog.com/hackathon/CCCu22/php_apis/applyFamily.php\",this.postObj).subscribe(res=>console.log(res),error=>console.error(error)),this.alertApply()},this.load=()=>{const body=this.postObj;0==this.attribute?(this.parentFlag=!0,this.gs.http(\"https://kn46itblog.com/hackathon/CCCu22/php_apis/getApplicant.php\",body).subscribe(res=>{this.returnObj=res,this.applicantList=[];for(let i=0;i<this.returnObj.applicant_num;i++)this.objWord=\"applicant\"+(i+1),this.applicantList.push(this.returnObj.applicant_list[this.objWord]);console.log(this.applicantList)})):1==this.attribute&&(this.parentFlag=!1)}}ngOnInit(){this.nativeStorage.getItem(\"login\").then(data=>{this.postObj.id=data.id,this.postObj.hash=data.hash,this.attribute=data.attribute,this.load()},error=>console.log(error))}alertApply(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const alert=yield this.alertController.create({message:\"家族登録申請が行われました\",buttons:[\"OK\"]});yield alert.present()}))}alertOk(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const alert=yield this.alertController.create({message:\"家族登録申請を許可しました\",buttons:[\"OK\"]});yield alert.present()}))}alertNo(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const alert=yield this.alertController.create({message:\"家族登録申請を拒否しました\",buttons:[\"OK\"]});yield alert.present()}))}}return FamilyPage.ɵfac=function(t){return new(t||FamilyPage)(core.Hb(ionic_angular.a),core.Hb(router.g),core.Hb(router.a),core.Hb(ngx.a),core.Hb(global_service.a))},FamilyPage.ɵcmp=core.Bb({type:FamilyPage,selectors:[[\"app-family\"]],decls:11,vars:2,consts:[[\"slot\",\"start\"],[\"id\",\"back\"],[\"id\",\"top\"],[4,\"ngIf\"],[4,\"ngFor\",\"ngForOf\"],[1,\"button-area\"],[1,\"ok\",3,\"id\",\"click\"],[1,\"no\",3,\"id\",\"click\"],[1,\"ion-padding\",3,\"submit\"],[\"lines\",\"full\",1,\"ion-padding-bottom\"],[\"position\",\"floating\"],[\"required\",\"\",\"type\",\"text\",\"name\",\"id\",3,\"ngModel\",\"ngModelChange\"],[\"type\",\"submit\",1,\"ok\"]],template:function(rf,ctx){1&rf&&(core.Kb(0,\"ion-header\"),core.Kb(1,\"ion-toolbar\"),core.Kb(2,\"ion-buttons\",0),core.Ib(3,\"ion-back-button\",1),core.Jb(),core.Kb(4,\"ion-title\"),core.gc(5,\"家族管理ページ\"),core.Jb(),core.Jb(),core.Jb(),core.Kb(6,\"ion-content\"),core.Kb(7,\"div\",2),core.gc(8,\"申請\"),core.Jb(),core.fc(9,FamilyPage_div_9_Template,2,1,\"div\",3),core.fc(10,FamilyPage_div_10_Template,9,1,\"div\",3),core.Jb()),2&rf&&(core.xb(9),core.Xb(\"ngIf\",ctx.parentFlag),core.xb(1),core.Xb(\"ngIf\",!ctx.parentFlag))},directives:[ionic_angular.n,ionic_angular.B,ionic_angular.e,ionic_angular.c,ionic_angular.d,ionic_angular.A,ionic_angular.k,common.i,common.h,ionic_angular.f,ionic_angular.g,fesm2015_forms.i,fesm2015_forms.e,fesm2015_forms.f,ionic_angular.r,ionic_angular.s,ionic_angular.q,ionic_angular.H,fesm2015_forms.h,fesm2015_forms.d,fesm2015_forms.g],styles:[\"#top[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:large}.ok[_ngcontent-%COMP%]{background-color:#cbf266}.no[_ngcontent-%COMP%], .ok[_ngcontent-%COMP%]{font-size:2em;color:#fff;border-radius:5px;padding:10px 30px;width:80%}.no[_ngcontent-%COMP%]{background-color:#ffd1d1}.button-area[_ngcontent-%COMP%]{text-align:center}\"]}),FamilyPage})()}];let family_routing_module_FamilyPageRoutingModule=(()=>{class FamilyPageRoutingModule{}return FamilyPageRoutingModule.ɵmod=core.Fb({type:FamilyPageRoutingModule}),FamilyPageRoutingModule.ɵinj=core.Eb({factory:function(t){return new(t||FamilyPageRoutingModule)},imports:[[router.i.forChild(routes)],router.i]}),FamilyPageRoutingModule})(),family_module_FamilyPageModule=(()=>{class FamilyPageModule{}return FamilyPageModule.ɵmod=core.Fb({type:FamilyPageModule}),FamilyPageModule.ɵinj=core.Eb({factory:function(t){return new(t||FamilyPageModule)},imports:[[common.b,fesm2015_forms.a,ionic_angular.C,family_routing_module_FamilyPageRoutingModule]]}),FamilyPageModule})()}}]);","extractedComments":[]}